---
title: Client-Side UUID Generation for Write Operations
status: Accepted
date: 2025-07-20
---

# Context

Creating users, memories, and entries previously required a round-trip to Spanner to obtain a unique ID, limiting throughput.  Generating UUID v4 values in the client removes this latency and keeps writes fully parallelisable.

# Decision

1. All `Create*` operations accept a caller-supplied UUID (generated by client SDKs).  
2. Server validates format and collision-checks via primary-key constraint; if collision occurs (statistically negligible) it returns `ALREADY_EXISTS`.  
3. UUID v4 from `github.com/google/uuid` is the reference implementation in Go; other SDKs must use RFC-4122 compliant random UUIDs.

# Consequences

• ~50 % latency reduction on high-volume create workloads (measured during Phase 6.1).  
• Spanner write-throughput scales linearly with client concurrency.  
• Requires all external clients to adopt the same algorithm; documented in SDK guides. 